<div class="register-content">
  <div *ngIf="!requestSuccess" class="error-message">
    <mat-error>{{ "form.displayError" | translate }}</mat-error>
    {{ reportError("form.displayError") }}
    <br/><br/>
    <a color="primary" mat-raised-button>
      {{ "form.ttlError" | translate }}
    </a>
  </div>
  <div *ngIf="requestSuccess">
    <form [formGroup]="form">
      <div fxLayout="row wrap" fxLayoutGap="16px grid">
        <div
          *ngFor="let group of groupedFormFields; let i = index"
          [ngClass]="{ 'position-center': groupsNumber === 1 }"
          fxFlex="100%"
          fxFlex.sm="100%"
          fxFlex.xs="100%"
        >
          <div class="mb-3">
            <label class="form-label">Subject-ID*<span class="field-key">&nbsp;&nbsp;id</span></label>
            <input
              class="form-control"
              formControlName="user_prefix"
              placeholder="did:example:123456789abcdefghi"
              type="text"
            />
          </div>

          <div
            *ngFor="let formField of group; let j = index"
            class="form-group"
          >
            <span *ngIf="j == 0">{{ formField.group }}</span>

            <app-dynamic-form-input
              #formInput
              *ngIf="formField.componentType == 'dynamicFormInput'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-dynamic-form-input>
            <app-dynamic-form-array
              #formArray
              *ngIf="formField.componentType == 'dynamicFormArray'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-dynamic-form-array>
            <app-dynamic-form-or
              #formOr
              *ngIf="formField.componentType == 'dynamicFormOr'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-dynamic-form-or>
            <app-dynamic-form-or-array
              #formOrArray
              *ngIf="formField.componentType == 'dynamicFormOrArray'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-dynamic-form-or-array>
            <app-expanded-fields
              #expandedFields
              *ngIf="formField.componentType == 'dynamicExpanded'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-expanded-fields>
            <app-dynamic-self-loops
              #selfLoops
              *ngIf="formField.componentType == 'dynamicSelfLoop'"
              [form]="form"
              [input]="formField"
              [shapes]="file.shapes"
            ></app-dynamic-self-loops>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
